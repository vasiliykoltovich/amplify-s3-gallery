{"ast":null,"code":"import { NormalizedSchema } from \"@smithy/core/schema\";\nimport { HttpRequest } from \"@smithy/protocol-http\";\nimport { collectBody } from \"./collect-stream-body\";\nimport { HttpProtocol } from \"./HttpProtocol\";\nexport class RpcProtocol extends HttpProtocol {\n  async serializeRequest(operationSchema, input, context) {\n    const serializer = this.serializer;\n    const query = {};\n    const headers = {};\n    const endpoint = await context.endpoint();\n    const ns = NormalizedSchema.of(operationSchema?.input);\n    const schema = ns.getSchema();\n    let payload;\n    const request = new HttpRequest({\n      protocol: \"\",\n      hostname: \"\",\n      port: undefined,\n      path: \"/\",\n      fragment: undefined,\n      query: query,\n      headers: headers,\n      body: undefined\n    });\n    if (endpoint) {\n      this.updateServiceEndpoint(request, endpoint);\n      this.setHostPrefix(request, operationSchema, input);\n    }\n    const _input = {\n      ...input\n    };\n    if (input) {\n      const eventStreamMember = ns.getEventStreamMember();\n      if (eventStreamMember) {\n        if (_input[eventStreamMember]) {\n          const initialRequest = {};\n          for (const [memberName, memberSchema] of ns.structIterator()) {\n            if (memberName !== eventStreamMember && _input[memberName]) {\n              serializer.write(memberSchema, _input[memberName]);\n              initialRequest[memberName] = serializer.flush();\n            }\n          }\n          payload = await this.serializeEventStream({\n            eventStream: _input[eventStreamMember],\n            requestSchema: ns,\n            initialRequest\n          });\n        }\n      } else {\n        serializer.write(schema, _input);\n        payload = serializer.flush();\n      }\n    }\n    request.headers = headers;\n    request.query = query;\n    request.body = payload;\n    request.method = \"POST\";\n    return request;\n  }\n  async deserializeResponse(operationSchema, context, response) {\n    const deserializer = this.deserializer;\n    const ns = NormalizedSchema.of(operationSchema.output);\n    const dataObject = {};\n    if (response.statusCode >= 300) {\n      const bytes = await collectBody(response.body, context);\n      if (bytes.byteLength > 0) {\n        Object.assign(dataObject, await deserializer.read(15, bytes));\n      }\n      await this.handleError(operationSchema, context, response, dataObject, this.deserializeMetadata(response));\n      throw new Error(\"@smithy/core/protocols - RPC Protocol error handler failed to throw.\");\n    }\n    for (const header in response.headers) {\n      const value = response.headers[header];\n      delete response.headers[header];\n      response.headers[header.toLowerCase()] = value;\n    }\n    const eventStreamMember = ns.getEventStreamMember();\n    if (eventStreamMember) {\n      dataObject[eventStreamMember] = await this.deserializeEventStream({\n        response,\n        responseSchema: ns,\n        initialResponseContainer: dataObject\n      });\n    } else {\n      const bytes = await collectBody(response.body, context);\n      if (bytes.byteLength > 0) {\n        Object.assign(dataObject, await deserializer.read(ns, bytes));\n      }\n    }\n    dataObject.$metadata = this.deserializeMetadata(response);\n    return dataObject;\n  }\n}","map":{"version":3,"names":["NormalizedSchema","HttpRequest","collectBody","HttpProtocol","RpcProtocol","serializeRequest","operationSchema","input","context","serializer","query","headers","endpoint","ns","of","schema","getSchema","payload","request","protocol","hostname","port","undefined","path","fragment","body","updateServiceEndpoint","setHostPrefix","_input","eventStreamMember","getEventStreamMember","initialRequest","memberName","memberSchema","structIterator","write","flush","serializeEventStream","eventStream","requestSchema","method","deserializeResponse","response","deserializer","output","dataObject","statusCode","bytes","byteLength","Object","assign","read","handleError","deserializeMetadata","Error","header","value","toLowerCase","deserializeEventStream","responseSchema","initialResponseContainer","$metadata"],"sources":["d:/ITechArt/react-lab-2025/application/node_modules/@aws-sdk/middleware-sdk-s3/node_modules/@smithy/core/dist-es/submodules/protocols/RpcProtocol.js"],"sourcesContent":["import { NormalizedSchema } from \"@smithy/core/schema\";\nimport { HttpRequest } from \"@smithy/protocol-http\";\nimport { collectBody } from \"./collect-stream-body\";\nimport { HttpProtocol } from \"./HttpProtocol\";\nexport class RpcProtocol extends HttpProtocol {\n    async serializeRequest(operationSchema, input, context) {\n        const serializer = this.serializer;\n        const query = {};\n        const headers = {};\n        const endpoint = await context.endpoint();\n        const ns = NormalizedSchema.of(operationSchema?.input);\n        const schema = ns.getSchema();\n        let payload;\n        const request = new HttpRequest({\n            protocol: \"\",\n            hostname: \"\",\n            port: undefined,\n            path: \"/\",\n            fragment: undefined,\n            query: query,\n            headers: headers,\n            body: undefined,\n        });\n        if (endpoint) {\n            this.updateServiceEndpoint(request, endpoint);\n            this.setHostPrefix(request, operationSchema, input);\n        }\n        const _input = {\n            ...input,\n        };\n        if (input) {\n            const eventStreamMember = ns.getEventStreamMember();\n            if (eventStreamMember) {\n                if (_input[eventStreamMember]) {\n                    const initialRequest = {};\n                    for (const [memberName, memberSchema] of ns.structIterator()) {\n                        if (memberName !== eventStreamMember && _input[memberName]) {\n                            serializer.write(memberSchema, _input[memberName]);\n                            initialRequest[memberName] = serializer.flush();\n                        }\n                    }\n                    payload = await this.serializeEventStream({\n                        eventStream: _input[eventStreamMember],\n                        requestSchema: ns,\n                        initialRequest,\n                    });\n                }\n            }\n            else {\n                serializer.write(schema, _input);\n                payload = serializer.flush();\n            }\n        }\n        request.headers = headers;\n        request.query = query;\n        request.body = payload;\n        request.method = \"POST\";\n        return request;\n    }\n    async deserializeResponse(operationSchema, context, response) {\n        const deserializer = this.deserializer;\n        const ns = NormalizedSchema.of(operationSchema.output);\n        const dataObject = {};\n        if (response.statusCode >= 300) {\n            const bytes = await collectBody(response.body, context);\n            if (bytes.byteLength > 0) {\n                Object.assign(dataObject, await deserializer.read(15, bytes));\n            }\n            await this.handleError(operationSchema, context, response, dataObject, this.deserializeMetadata(response));\n            throw new Error(\"@smithy/core/protocols - RPC Protocol error handler failed to throw.\");\n        }\n        for (const header in response.headers) {\n            const value = response.headers[header];\n            delete response.headers[header];\n            response.headers[header.toLowerCase()] = value;\n        }\n        const eventStreamMember = ns.getEventStreamMember();\n        if (eventStreamMember) {\n            dataObject[eventStreamMember] = await this.deserializeEventStream({\n                response,\n                responseSchema: ns,\n                initialResponseContainer: dataObject,\n            });\n        }\n        else {\n            const bytes = await collectBody(response.body, context);\n            if (bytes.byteLength > 0) {\n                Object.assign(dataObject, await deserializer.read(ns, bytes));\n            }\n        }\n        dataObject.$metadata = this.deserializeMetadata(response);\n        return dataObject;\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}