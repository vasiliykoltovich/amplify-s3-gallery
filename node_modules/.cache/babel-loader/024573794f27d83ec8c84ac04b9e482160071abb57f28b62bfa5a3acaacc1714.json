{"ast":null,"code":"import { TypeRegistry } from \"@smithy/core/schema\";\nimport { decorateServiceException } from \"@smithy/smithy-client\";\nexport class ProtocolLib {\n  queryCompat;\n  constructor(queryCompat = false) {\n    this.queryCompat = queryCompat;\n  }\n  resolveRestContentType(defaultContentType, inputSchema) {\n    const members = inputSchema.getMemberSchemas();\n    const httpPayloadMember = Object.values(members).find(m => {\n      return !!m.getMergedTraits().httpPayload;\n    });\n    if (httpPayloadMember) {\n      const mediaType = httpPayloadMember.getMergedTraits().mediaType;\n      if (mediaType) {\n        return mediaType;\n      } else if (httpPayloadMember.isStringSchema()) {\n        return \"text/plain\";\n      } else if (httpPayloadMember.isBlobSchema()) {\n        return \"application/octet-stream\";\n      } else {\n        return defaultContentType;\n      }\n    } else if (!inputSchema.isUnitSchema()) {\n      const hasBody = Object.values(members).find(m => {\n        const {\n          httpQuery,\n          httpQueryParams,\n          httpHeader,\n          httpLabel,\n          httpPrefixHeaders\n        } = m.getMergedTraits();\n        const noPrefixHeaders = httpPrefixHeaders === void 0;\n        return !httpQuery && !httpQueryParams && !httpHeader && !httpLabel && noPrefixHeaders;\n      });\n      if (hasBody) {\n        return defaultContentType;\n      }\n    }\n  }\n  async getErrorSchemaOrThrowBaseException(errorIdentifier, defaultNamespace, response, dataObject, metadata, getErrorSchema) {\n    let namespace = defaultNamespace;\n    let errorName = errorIdentifier;\n    if (errorIdentifier.includes(\"#\")) {\n      [namespace, errorName] = errorIdentifier.split(\"#\");\n    }\n    const errorMetadata = {\n      $metadata: metadata,\n      $fault: response.statusCode < 500 ? \"client\" : \"server\"\n    };\n    const registry = TypeRegistry.for(namespace);\n    try {\n      const errorSchema = getErrorSchema?.(registry, errorName) ?? registry.getSchema(errorIdentifier);\n      return {\n        errorSchema,\n        errorMetadata\n      };\n    } catch (e) {\n      dataObject.message = dataObject.message ?? dataObject.Message ?? \"UnknownError\";\n      const synthetic = TypeRegistry.for(\"smithy.ts.sdk.synthetic.\" + namespace);\n      const baseExceptionSchema = synthetic.getBaseException();\n      if (baseExceptionSchema) {\n        const ErrorCtor = synthetic.getErrorCtor(baseExceptionSchema) ?? Error;\n        throw this.decorateServiceException(Object.assign(new ErrorCtor({\n          name: errorName\n        }), errorMetadata), dataObject);\n      }\n      throw this.decorateServiceException(Object.assign(new Error(errorName), errorMetadata), dataObject);\n    }\n  }\n  decorateServiceException(exception, additions = {}) {\n    if (this.queryCompat) {\n      const msg = exception.Message ?? additions.Message;\n      const error = decorateServiceException(exception, additions);\n      if (msg) {\n        error.Message = msg;\n        error.message = msg;\n      }\n      return error;\n    }\n    return decorateServiceException(exception, additions);\n  }\n  setQueryCompatError(output, response) {\n    const queryErrorHeader = response.headers?.[\"x-amzn-query-error\"];\n    if (output !== undefined && queryErrorHeader != null) {\n      const [Code, Type] = queryErrorHeader.split(\";\");\n      const entries = Object.entries(output);\n      const Error = {\n        Code,\n        Type\n      };\n      Object.assign(output, Error);\n      for (const [k, v] of entries) {\n        Error[k] = v;\n      }\n      delete Error.__type;\n      output.Error = Error;\n    }\n  }\n  queryCompatOutput(queryCompatErrorData, errorData) {\n    if (queryCompatErrorData.Error) {\n      errorData.Error = queryCompatErrorData.Error;\n    }\n    if (queryCompatErrorData.Type) {\n      errorData.Type = queryCompatErrorData.Type;\n    }\n    if (queryCompatErrorData.Code) {\n      errorData.Code = queryCompatErrorData.Code;\n    }\n  }\n}","map":{"version":3,"names":["TypeRegistry","decorateServiceException","ProtocolLib","queryCompat","constructor","resolveRestContentType","defaultContentType","inputSchema","members","getMemberSchemas","httpPayloadMember","Object","values","find","m","getMergedTraits","httpPayload","mediaType","isStringSchema","isBlobSchema","isUnitSchema","hasBody","httpQuery","httpQueryParams","httpHeader","httpLabel","httpPrefixHeaders","noPrefixHeaders","getErrorSchemaOrThrowBaseException","errorIdentifier","defaultNamespace","response","dataObject","metadata","getErrorSchema","namespace","errorName","includes","split","errorMetadata","$metadata","$fault","statusCode","registry","for","errorSchema","getSchema","e","message","Message","synthetic","baseExceptionSchema","getBaseException","ErrorCtor","getErrorCtor","Error","assign","name","exception","additions","msg","error","setQueryCompatError","output","queryErrorHeader","headers","undefined","Code","Type","entries","k","v","__type","queryCompatOutput","queryCompatErrorData","errorData"],"sources":["d:/ITechArt/react-lab-2025/application/node_modules/@aws-sdk/client-s3/node_modules/@aws-sdk/core/dist-es/submodules/protocols/ProtocolLib.js"],"sourcesContent":["import { TypeRegistry } from \"@smithy/core/schema\";\nimport { decorateServiceException } from \"@smithy/smithy-client\";\nexport class ProtocolLib {\n    queryCompat;\n    constructor(queryCompat = false) {\n        this.queryCompat = queryCompat;\n    }\n    resolveRestContentType(defaultContentType, inputSchema) {\n        const members = inputSchema.getMemberSchemas();\n        const httpPayloadMember = Object.values(members).find((m) => {\n            return !!m.getMergedTraits().httpPayload;\n        });\n        if (httpPayloadMember) {\n            const mediaType = httpPayloadMember.getMergedTraits().mediaType;\n            if (mediaType) {\n                return mediaType;\n            }\n            else if (httpPayloadMember.isStringSchema()) {\n                return \"text/plain\";\n            }\n            else if (httpPayloadMember.isBlobSchema()) {\n                return \"application/octet-stream\";\n            }\n            else {\n                return defaultContentType;\n            }\n        }\n        else if (!inputSchema.isUnitSchema()) {\n            const hasBody = Object.values(members).find((m) => {\n                const { httpQuery, httpQueryParams, httpHeader, httpLabel, httpPrefixHeaders } = m.getMergedTraits();\n                const noPrefixHeaders = httpPrefixHeaders === void 0;\n                return !httpQuery && !httpQueryParams && !httpHeader && !httpLabel && noPrefixHeaders;\n            });\n            if (hasBody) {\n                return defaultContentType;\n            }\n        }\n    }\n    async getErrorSchemaOrThrowBaseException(errorIdentifier, defaultNamespace, response, dataObject, metadata, getErrorSchema) {\n        let namespace = defaultNamespace;\n        let errorName = errorIdentifier;\n        if (errorIdentifier.includes(\"#\")) {\n            [namespace, errorName] = errorIdentifier.split(\"#\");\n        }\n        const errorMetadata = {\n            $metadata: metadata,\n            $fault: response.statusCode < 500 ? \"client\" : \"server\",\n        };\n        const registry = TypeRegistry.for(namespace);\n        try {\n            const errorSchema = getErrorSchema?.(registry, errorName) ?? registry.getSchema(errorIdentifier);\n            return { errorSchema, errorMetadata };\n        }\n        catch (e) {\n            dataObject.message = dataObject.message ?? dataObject.Message ?? \"UnknownError\";\n            const synthetic = TypeRegistry.for(\"smithy.ts.sdk.synthetic.\" + namespace);\n            const baseExceptionSchema = synthetic.getBaseException();\n            if (baseExceptionSchema) {\n                const ErrorCtor = synthetic.getErrorCtor(baseExceptionSchema) ?? Error;\n                throw this.decorateServiceException(Object.assign(new ErrorCtor({ name: errorName }), errorMetadata), dataObject);\n            }\n            throw this.decorateServiceException(Object.assign(new Error(errorName), errorMetadata), dataObject);\n        }\n    }\n    decorateServiceException(exception, additions = {}) {\n        if (this.queryCompat) {\n            const msg = exception.Message ?? additions.Message;\n            const error = decorateServiceException(exception, additions);\n            if (msg) {\n                error.Message = msg;\n                error.message = msg;\n            }\n            return error;\n        }\n        return decorateServiceException(exception, additions);\n    }\n    setQueryCompatError(output, response) {\n        const queryErrorHeader = response.headers?.[\"x-amzn-query-error\"];\n        if (output !== undefined && queryErrorHeader != null) {\n            const [Code, Type] = queryErrorHeader.split(\";\");\n            const entries = Object.entries(output);\n            const Error = {\n                Code,\n                Type,\n            };\n            Object.assign(output, Error);\n            for (const [k, v] of entries) {\n                Error[k] = v;\n            }\n            delete Error.__type;\n            output.Error = Error;\n        }\n    }\n    queryCompatOutput(queryCompatErrorData, errorData) {\n        if (queryCompatErrorData.Error) {\n            errorData.Error = queryCompatErrorData.Error;\n        }\n        if (queryCompatErrorData.Type) {\n            errorData.Type = queryCompatErrorData.Type;\n        }\n        if (queryCompatErrorData.Code) {\n            errorData.Code = queryCompatErrorData.Code;\n        }\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}