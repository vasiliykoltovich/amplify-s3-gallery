{"ast":null,"code":"import { HttpBindingProtocol, HttpInterceptingShapeDeserializer, HttpInterceptingShapeSerializer } from \"@smithy/core/protocols\";\nimport { NormalizedSchema, TypeRegistry } from \"@smithy/core/schema\";\nimport { ProtocolLib } from \"../ProtocolLib\";\nimport { loadRestXmlErrorCode } from \"./parseXmlBody\";\nimport { XmlCodec } from \"./XmlCodec\";\nexport class AwsRestXmlProtocol extends HttpBindingProtocol {\n  codec;\n  serializer;\n  deserializer;\n  mixin = new ProtocolLib();\n  constructor(options) {\n    super(options);\n    const settings = {\n      timestampFormat: {\n        useTrait: true,\n        default: 5\n      },\n      httpBindings: true,\n      xmlNamespace: options.xmlNamespace,\n      serviceNamespace: options.defaultNamespace\n    };\n    this.codec = new XmlCodec(settings);\n    this.serializer = new HttpInterceptingShapeSerializer(this.codec.createSerializer(), settings);\n    this.deserializer = new HttpInterceptingShapeDeserializer(this.codec.createDeserializer(), settings);\n  }\n  getPayloadCodec() {\n    return this.codec;\n  }\n  getShapeId() {\n    return \"aws.protocols#restXml\";\n  }\n  async serializeRequest(operationSchema, input, context) {\n    const request = await super.serializeRequest(operationSchema, input, context);\n    const inputSchema = NormalizedSchema.of(operationSchema.input);\n    if (!request.headers[\"content-type\"]) {\n      const contentType = this.mixin.resolveRestContentType(this.getDefaultContentType(), inputSchema);\n      if (contentType) {\n        request.headers[\"content-type\"] = contentType;\n      }\n    }\n    if (request.headers[\"content-type\"] === this.getDefaultContentType()) {\n      if (typeof request.body === \"string\") {\n        request.body = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' + request.body;\n      }\n    }\n    return request;\n  }\n  async deserializeResponse(operationSchema, context, response) {\n    return super.deserializeResponse(operationSchema, context, response);\n  }\n  async handleError(operationSchema, context, response, dataObject, metadata) {\n    const errorIdentifier = loadRestXmlErrorCode(response, dataObject) ?? \"Unknown\";\n    const {\n      errorSchema,\n      errorMetadata\n    } = await this.mixin.getErrorSchemaOrThrowBaseException(errorIdentifier, this.options.defaultNamespace, response, dataObject, metadata);\n    const ns = NormalizedSchema.of(errorSchema);\n    const message = dataObject.Error?.message ?? dataObject.Error?.Message ?? dataObject.message ?? dataObject.Message ?? \"Unknown\";\n    const ErrorCtor = TypeRegistry.for(errorSchema[1]).getErrorCtor(errorSchema) ?? Error;\n    const exception = new ErrorCtor(message);\n    await this.deserializeHttpMessage(errorSchema, context, response, dataObject);\n    const output = {};\n    for (const [name, member] of ns.structIterator()) {\n      const target = member.getMergedTraits().xmlName ?? name;\n      const value = dataObject.Error?.[target] ?? dataObject[target];\n      output[name] = this.codec.createDeserializer().readSchema(member, value);\n    }\n    throw this.mixin.decorateServiceException(Object.assign(exception, errorMetadata, {\n      $fault: ns.getMergedTraits().error,\n      message\n    }, output), dataObject);\n  }\n  getDefaultContentType() {\n    return \"application/xml\";\n  }\n}","map":{"version":3,"names":["HttpBindingProtocol","HttpInterceptingShapeDeserializer","HttpInterceptingShapeSerializer","NormalizedSchema","TypeRegistry","ProtocolLib","loadRestXmlErrorCode","XmlCodec","AwsRestXmlProtocol","codec","serializer","deserializer","mixin","constructor","options","settings","timestampFormat","useTrait","default","httpBindings","xmlNamespace","serviceNamespace","defaultNamespace","createSerializer","createDeserializer","getPayloadCodec","getShapeId","serializeRequest","operationSchema","input","context","request","inputSchema","of","headers","contentType","resolveRestContentType","getDefaultContentType","body","deserializeResponse","response","handleError","dataObject","metadata","errorIdentifier","errorSchema","errorMetadata","getErrorSchemaOrThrowBaseException","ns","message","Error","Message","ErrorCtor","for","getErrorCtor","exception","deserializeHttpMessage","output","name","member","structIterator","target","getMergedTraits","xmlName","value","readSchema","decorateServiceException","Object","assign","$fault","error"],"sources":["D:/ITechArt/react-lab-2025/application/node_modules/@aws-sdk/middleware-flexible-checksums/node_modules/@aws-sdk/core/dist-es/submodules/protocols/xml/AwsRestXmlProtocol.js"],"sourcesContent":["import { HttpBindingProtocol, HttpInterceptingShapeDeserializer, HttpInterceptingShapeSerializer, } from \"@smithy/core/protocols\";\nimport { NormalizedSchema, TypeRegistry } from \"@smithy/core/schema\";\nimport { ProtocolLib } from \"../ProtocolLib\";\nimport { loadRestXmlErrorCode } from \"./parseXmlBody\";\nimport { XmlCodec } from \"./XmlCodec\";\nexport class AwsRestXmlProtocol extends HttpBindingProtocol {\n    codec;\n    serializer;\n    deserializer;\n    mixin = new ProtocolLib();\n    constructor(options) {\n        super(options);\n        const settings = {\n            timestampFormat: {\n                useTrait: true,\n                default: 5,\n            },\n            httpBindings: true,\n            xmlNamespace: options.xmlNamespace,\n            serviceNamespace: options.defaultNamespace,\n        };\n        this.codec = new XmlCodec(settings);\n        this.serializer = new HttpInterceptingShapeSerializer(this.codec.createSerializer(), settings);\n        this.deserializer = new HttpInterceptingShapeDeserializer(this.codec.createDeserializer(), settings);\n    }\n    getPayloadCodec() {\n        return this.codec;\n    }\n    getShapeId() {\n        return \"aws.protocols#restXml\";\n    }\n    async serializeRequest(operationSchema, input, context) {\n        const request = await super.serializeRequest(operationSchema, input, context);\n        const inputSchema = NormalizedSchema.of(operationSchema.input);\n        if (!request.headers[\"content-type\"]) {\n            const contentType = this.mixin.resolveRestContentType(this.getDefaultContentType(), inputSchema);\n            if (contentType) {\n                request.headers[\"content-type\"] = contentType;\n            }\n        }\n        if (request.headers[\"content-type\"] === this.getDefaultContentType()) {\n            if (typeof request.body === \"string\") {\n                request.body = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' + request.body;\n            }\n        }\n        return request;\n    }\n    async deserializeResponse(operationSchema, context, response) {\n        return super.deserializeResponse(operationSchema, context, response);\n    }\n    async handleError(operationSchema, context, response, dataObject, metadata) {\n        const errorIdentifier = loadRestXmlErrorCode(response, dataObject) ?? \"Unknown\";\n        const { errorSchema, errorMetadata } = await this.mixin.getErrorSchemaOrThrowBaseException(errorIdentifier, this.options.defaultNamespace, response, dataObject, metadata);\n        const ns = NormalizedSchema.of(errorSchema);\n        const message = dataObject.Error?.message ?? dataObject.Error?.Message ?? dataObject.message ?? dataObject.Message ?? \"Unknown\";\n        const ErrorCtor = TypeRegistry.for(errorSchema[1]).getErrorCtor(errorSchema) ?? Error;\n        const exception = new ErrorCtor(message);\n        await this.deserializeHttpMessage(errorSchema, context, response, dataObject);\n        const output = {};\n        for (const [name, member] of ns.structIterator()) {\n            const target = member.getMergedTraits().xmlName ?? name;\n            const value = dataObject.Error?.[target] ?? dataObject[target];\n            output[name] = this.codec.createDeserializer().readSchema(member, value);\n        }\n        throw this.mixin.decorateServiceException(Object.assign(exception, errorMetadata, {\n            $fault: ns.getMergedTraits().error,\n            message,\n        }, output), dataObject);\n    }\n    getDefaultContentType() {\n        return \"application/xml\";\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}