{"ast":null,"code":"import { loadSmithyRpcV2CborErrorCode, SmithyRpcV2CborProtocol } from \"@smithy/core/cbor\";\nimport { NormalizedSchema, TypeRegistry } from \"@smithy/core/schema\";\nimport { ProtocolLib } from \"../ProtocolLib\";\nexport class AwsSmithyRpcV2CborProtocol extends SmithyRpcV2CborProtocol {\n  awsQueryCompatible;\n  mixin;\n  constructor({\n    defaultNamespace,\n    awsQueryCompatible\n  }) {\n    super({\n      defaultNamespace\n    });\n    this.awsQueryCompatible = !!awsQueryCompatible;\n    this.mixin = new ProtocolLib(this.awsQueryCompatible);\n  }\n  async serializeRequest(operationSchema, input, context) {\n    const request = await super.serializeRequest(operationSchema, input, context);\n    if (this.awsQueryCompatible) {\n      request.headers[\"x-amzn-query-mode\"] = \"true\";\n    }\n    return request;\n  }\n  async handleError(operationSchema, context, response, dataObject, metadata) {\n    if (this.awsQueryCompatible) {\n      this.mixin.setQueryCompatError(dataObject, response);\n    }\n    const errorName = loadSmithyRpcV2CborErrorCode(response, dataObject) ?? \"Unknown\";\n    const {\n      errorSchema,\n      errorMetadata\n    } = await this.mixin.getErrorSchemaOrThrowBaseException(errorName, this.options.defaultNamespace, response, dataObject, metadata);\n    const ns = NormalizedSchema.of(errorSchema);\n    const message = dataObject.message ?? dataObject.Message ?? \"Unknown\";\n    const ErrorCtor = TypeRegistry.for(errorSchema[1]).getErrorCtor(errorSchema) ?? Error;\n    const exception = new ErrorCtor(message);\n    const output = {};\n    for (const [name, member] of ns.structIterator()) {\n      output[name] = this.deserializer.readValue(member, dataObject[name]);\n    }\n    if (this.awsQueryCompatible) {\n      this.mixin.queryCompatOutput(dataObject, output);\n    }\n    throw this.mixin.decorateServiceException(Object.assign(exception, errorMetadata, {\n      $fault: ns.getMergedTraits().error,\n      message\n    }, output), dataObject);\n  }\n}","map":{"version":3,"names":["loadSmithyRpcV2CborErrorCode","SmithyRpcV2CborProtocol","NormalizedSchema","TypeRegistry","ProtocolLib","AwsSmithyRpcV2CborProtocol","awsQueryCompatible","mixin","constructor","defaultNamespace","serializeRequest","operationSchema","input","context","request","headers","handleError","response","dataObject","metadata","setQueryCompatError","errorName","errorSchema","errorMetadata","getErrorSchemaOrThrowBaseException","options","ns","of","message","Message","ErrorCtor","for","getErrorCtor","Error","exception","output","name","member","structIterator","deserializer","readValue","queryCompatOutput","decorateServiceException","Object","assign","$fault","getMergedTraits","error"],"sources":["D:/ITechArt/react-lab-2025/application/node_modules/@aws-sdk/client-s3/node_modules/@aws-sdk/core/dist-es/submodules/protocols/cbor/AwsSmithyRpcV2CborProtocol.js"],"sourcesContent":["import { loadSmithyRpcV2CborErrorCode, SmithyRpcV2CborProtocol } from \"@smithy/core/cbor\";\nimport { NormalizedSchema, TypeRegistry } from \"@smithy/core/schema\";\nimport { ProtocolLib } from \"../ProtocolLib\";\nexport class AwsSmithyRpcV2CborProtocol extends SmithyRpcV2CborProtocol {\n    awsQueryCompatible;\n    mixin;\n    constructor({ defaultNamespace, awsQueryCompatible, }) {\n        super({ defaultNamespace });\n        this.awsQueryCompatible = !!awsQueryCompatible;\n        this.mixin = new ProtocolLib(this.awsQueryCompatible);\n    }\n    async serializeRequest(operationSchema, input, context) {\n        const request = await super.serializeRequest(operationSchema, input, context);\n        if (this.awsQueryCompatible) {\n            request.headers[\"x-amzn-query-mode\"] = \"true\";\n        }\n        return request;\n    }\n    async handleError(operationSchema, context, response, dataObject, metadata) {\n        if (this.awsQueryCompatible) {\n            this.mixin.setQueryCompatError(dataObject, response);\n        }\n        const errorName = loadSmithyRpcV2CborErrorCode(response, dataObject) ?? \"Unknown\";\n        const { errorSchema, errorMetadata } = await this.mixin.getErrorSchemaOrThrowBaseException(errorName, this.options.defaultNamespace, response, dataObject, metadata);\n        const ns = NormalizedSchema.of(errorSchema);\n        const message = dataObject.message ?? dataObject.Message ?? \"Unknown\";\n        const ErrorCtor = TypeRegistry.for(errorSchema[1]).getErrorCtor(errorSchema) ?? Error;\n        const exception = new ErrorCtor(message);\n        const output = {};\n        for (const [name, member] of ns.structIterator()) {\n            output[name] = this.deserializer.readValue(member, dataObject[name]);\n        }\n        if (this.awsQueryCompatible) {\n            this.mixin.queryCompatOutput(dataObject, output);\n        }\n        throw this.mixin.decorateServiceException(Object.assign(exception, errorMetadata, {\n            $fault: ns.getMergedTraits().error,\n            message,\n        }, output), dataObject);\n    }\n}\n"],"mappings":"AAAA,SAASA,4BAA4B,EAAEC,uBAAuB,QAAQ,mBAAmB;AACzF,SAASC,gBAAgB,EAAEC,YAAY,QAAQ,qBAAqB;AACpE,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,OAAO,MAAMC,0BAA0B,SAASJ,uBAAuB,CAAC;EACpEK,kBAAkB;EAClBC,KAAK;EACLC,WAAWA,CAAC;IAAEC,gBAAgB;IAAEH;EAAoB,CAAC,EAAE;IACnD,KAAK,CAAC;MAAEG;IAAiB,CAAC,CAAC;IAC3B,IAAI,CAACH,kBAAkB,GAAG,CAAC,CAACA,kBAAkB;IAC9C,IAAI,CAACC,KAAK,GAAG,IAAIH,WAAW,CAAC,IAAI,CAACE,kBAAkB,CAAC;EACzD;EACA,MAAMI,gBAAgBA,CAACC,eAAe,EAAEC,KAAK,EAAEC,OAAO,EAAE;IACpD,MAAMC,OAAO,GAAG,MAAM,KAAK,CAACJ,gBAAgB,CAACC,eAAe,EAAEC,KAAK,EAAEC,OAAO,CAAC;IAC7E,IAAI,IAAI,CAACP,kBAAkB,EAAE;MACzBQ,OAAO,CAACC,OAAO,CAAC,mBAAmB,CAAC,GAAG,MAAM;IACjD;IACA,OAAOD,OAAO;EAClB;EACA,MAAME,WAAWA,CAACL,eAAe,EAAEE,OAAO,EAAEI,QAAQ,EAAEC,UAAU,EAAEC,QAAQ,EAAE;IACxE,IAAI,IAAI,CAACb,kBAAkB,EAAE;MACzB,IAAI,CAACC,KAAK,CAACa,mBAAmB,CAACF,UAAU,EAAED,QAAQ,CAAC;IACxD;IACA,MAAMI,SAAS,GAAGrB,4BAA4B,CAACiB,QAAQ,EAAEC,UAAU,CAAC,IAAI,SAAS;IACjF,MAAM;MAAEI,WAAW;MAAEC;IAAc,CAAC,GAAG,MAAM,IAAI,CAAChB,KAAK,CAACiB,kCAAkC,CAACH,SAAS,EAAE,IAAI,CAACI,OAAO,CAAChB,gBAAgB,EAAEQ,QAAQ,EAAEC,UAAU,EAAEC,QAAQ,CAAC;IACpK,MAAMO,EAAE,GAAGxB,gBAAgB,CAACyB,EAAE,CAACL,WAAW,CAAC;IAC3C,MAAMM,OAAO,GAAGV,UAAU,CAACU,OAAO,IAAIV,UAAU,CAACW,OAAO,IAAI,SAAS;IACrE,MAAMC,SAAS,GAAG3B,YAAY,CAAC4B,GAAG,CAACT,WAAW,CAAC,CAAC,CAAC,CAAC,CAACU,YAAY,CAACV,WAAW,CAAC,IAAIW,KAAK;IACrF,MAAMC,SAAS,GAAG,IAAIJ,SAAS,CAACF,OAAO,CAAC;IACxC,MAAMO,MAAM,GAAG,CAAC,CAAC;IACjB,KAAK,MAAM,CAACC,IAAI,EAAEC,MAAM,CAAC,IAAIX,EAAE,CAACY,cAAc,CAAC,CAAC,EAAE;MAC9CH,MAAM,CAACC,IAAI,CAAC,GAAG,IAAI,CAACG,YAAY,CAACC,SAAS,CAACH,MAAM,EAAEnB,UAAU,CAACkB,IAAI,CAAC,CAAC;IACxE;IACA,IAAI,IAAI,CAAC9B,kBAAkB,EAAE;MACzB,IAAI,CAACC,KAAK,CAACkC,iBAAiB,CAACvB,UAAU,EAAEiB,MAAM,CAAC;IACpD;IACA,MAAM,IAAI,CAAC5B,KAAK,CAACmC,wBAAwB,CAACC,MAAM,CAACC,MAAM,CAACV,SAAS,EAAEX,aAAa,EAAE;MAC9EsB,MAAM,EAAEnB,EAAE,CAACoB,eAAe,CAAC,CAAC,CAACC,KAAK;MAClCnB;IACJ,CAAC,EAAEO,MAAM,CAAC,EAAEjB,UAAU,CAAC;EAC3B;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}