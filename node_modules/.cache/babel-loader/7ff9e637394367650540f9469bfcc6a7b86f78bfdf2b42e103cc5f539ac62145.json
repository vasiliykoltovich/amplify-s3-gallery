{"ast":null,"code":"export class S3ExpressIdentityCache {\n  data;\n  lastPurgeTime = Date.now();\n  static EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS = 30_000;\n  constructor(data = {}) {\n    this.data = data;\n  }\n  get(key) {\n    const entry = this.data[key];\n    if (!entry) {\n      return;\n    }\n    return entry;\n  }\n  set(key, entry) {\n    this.data[key] = entry;\n    return entry;\n  }\n  delete(key) {\n    delete this.data[key];\n  }\n  async purgeExpired() {\n    const now = Date.now();\n    if (this.lastPurgeTime + S3ExpressIdentityCache.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS > now) {\n      return;\n    }\n    for (const key in this.data) {\n      const entry = this.data[key];\n      if (!entry.isRefreshing) {\n        const credential = await entry.identity;\n        if (credential.expiration) {\n          if (credential.expiration.getTime() < now) {\n            delete this.data[key];\n          }\n        }\n      }\n    }\n  }\n}","map":{"version":3,"names":["S3ExpressIdentityCache","data","lastPurgeTime","Date","now","EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS","constructor","get","key","entry","set","delete","purgeExpired","isRefreshing","credential","identity","expiration","getTime"],"sources":["d:/ITechArt/react-lab-2025/application/node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/classes/S3ExpressIdentityCache.js"],"sourcesContent":["export class S3ExpressIdentityCache {\n    data;\n    lastPurgeTime = Date.now();\n    static EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS = 30_000;\n    constructor(data = {}) {\n        this.data = data;\n    }\n    get(key) {\n        const entry = this.data[key];\n        if (!entry) {\n            return;\n        }\n        return entry;\n    }\n    set(key, entry) {\n        this.data[key] = entry;\n        return entry;\n    }\n    delete(key) {\n        delete this.data[key];\n    }\n    async purgeExpired() {\n        const now = Date.now();\n        if (this.lastPurgeTime + S3ExpressIdentityCache.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS > now) {\n            return;\n        }\n        for (const key in this.data) {\n            const entry = this.data[key];\n            if (!entry.isRefreshing) {\n                const credential = await entry.identity;\n                if (credential.expiration) {\n                    if (credential.expiration.getTime() < now) {\n                        delete this.data[key];\n                    }\n                }\n            }\n        }\n    }\n}\n"],"mappings":"AAAA,OAAO,MAAMA,sBAAsB,CAAC;EAChCC,IAAI;EACJC,aAAa,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;EAC1B,OAAOC,oCAAoC,GAAG,MAAM;EACpDC,WAAWA,CAACL,IAAI,GAAG,CAAC,CAAC,EAAE;IACnB,IAAI,CAACA,IAAI,GAAGA,IAAI;EACpB;EACAM,GAAGA,CAACC,GAAG,EAAE;IACL,MAAMC,KAAK,GAAG,IAAI,CAACR,IAAI,CAACO,GAAG,CAAC;IAC5B,IAAI,CAACC,KAAK,EAAE;MACR;IACJ;IACA,OAAOA,KAAK;EAChB;EACAC,GAAGA,CAACF,GAAG,EAAEC,KAAK,EAAE;IACZ,IAAI,CAACR,IAAI,CAACO,GAAG,CAAC,GAAGC,KAAK;IACtB,OAAOA,KAAK;EAChB;EACAE,MAAMA,CAACH,GAAG,EAAE;IACR,OAAO,IAAI,CAACP,IAAI,CAACO,GAAG,CAAC;EACzB;EACA,MAAMI,YAAYA,CAAA,EAAG;IACjB,MAAMR,GAAG,GAAGD,IAAI,CAACC,GAAG,CAAC,CAAC;IACtB,IAAI,IAAI,CAACF,aAAa,GAAGF,sBAAsB,CAACK,oCAAoC,GAAGD,GAAG,EAAE;MACxF;IACJ;IACA,KAAK,MAAMI,GAAG,IAAI,IAAI,CAACP,IAAI,EAAE;MACzB,MAAMQ,KAAK,GAAG,IAAI,CAACR,IAAI,CAACO,GAAG,CAAC;MAC5B,IAAI,CAACC,KAAK,CAACI,YAAY,EAAE;QACrB,MAAMC,UAAU,GAAG,MAAML,KAAK,CAACM,QAAQ;QACvC,IAAID,UAAU,CAACE,UAAU,EAAE;UACvB,IAAIF,UAAU,CAACE,UAAU,CAACC,OAAO,CAAC,CAAC,GAAGb,GAAG,EAAE;YACvC,OAAO,IAAI,CAACH,IAAI,CAACO,GAAG,CAAC;UACzB;QACJ;MACJ;IACJ;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}