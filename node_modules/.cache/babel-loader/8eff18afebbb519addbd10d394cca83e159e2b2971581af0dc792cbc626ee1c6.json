{"ast":null,"code":"import { NormalizedSchema } from \"@smithy/core/schema\";\nimport { _parseEpochTimestamp, _parseRfc3339DateTimeWithOffset, _parseRfc7231DateTime, LazyJsonString, NumericValue, splitHeader } from \"@smithy/core/serde\";\nimport { fromBase64 } from \"@smithy/util-base64\";\nimport { toUtf8 } from \"@smithy/util-utf8\";\nimport { SerdeContext } from \"../SerdeContext\";\nimport { determineTimestampFormat } from \"./determineTimestampFormat\";\nexport class FromStringShapeDeserializer extends SerdeContext {\n  settings;\n  constructor(settings) {\n    super();\n    this.settings = settings;\n  }\n  read(_schema, data) {\n    const ns = NormalizedSchema.of(_schema);\n    if (ns.isListSchema()) {\n      return splitHeader(data).map(item => this.read(ns.getValueSchema(), item));\n    }\n    if (ns.isBlobSchema()) {\n      return (this.serdeContext?.base64Decoder ?? fromBase64)(data);\n    }\n    if (ns.isTimestampSchema()) {\n      const format = determineTimestampFormat(ns, this.settings);\n      switch (format) {\n        case 5:\n          return _parseRfc3339DateTimeWithOffset(data);\n        case 6:\n          return _parseRfc7231DateTime(data);\n        case 7:\n          return _parseEpochTimestamp(data);\n        default:\n          console.warn(\"Missing timestamp format, parsing value with Date constructor:\", data);\n          return new Date(data);\n      }\n    }\n    if (ns.isStringSchema()) {\n      const mediaType = ns.getMergedTraits().mediaType;\n      let intermediateValue = data;\n      if (mediaType) {\n        if (ns.getMergedTraits().httpHeader) {\n          intermediateValue = this.base64ToUtf8(intermediateValue);\n        }\n        const isJson = mediaType === \"application/json\" || mediaType.endsWith(\"+json\");\n        if (isJson) {\n          intermediateValue = LazyJsonString.from(intermediateValue);\n        }\n        return intermediateValue;\n      }\n    }\n    if (ns.isNumericSchema()) {\n      return Number(data);\n    }\n    if (ns.isBigIntegerSchema()) {\n      return BigInt(data);\n    }\n    if (ns.isBigDecimalSchema()) {\n      return new NumericValue(data, \"bigDecimal\");\n    }\n    if (ns.isBooleanSchema()) {\n      return String(data).toLowerCase() === \"true\";\n    }\n    return data;\n  }\n  base64ToUtf8(base64String) {\n    return (this.serdeContext?.utf8Encoder ?? toUtf8)((this.serdeContext?.base64Decoder ?? fromBase64)(base64String));\n  }\n}","map":{"version":3,"names":["NormalizedSchema","_parseEpochTimestamp","_parseRfc3339DateTimeWithOffset","_parseRfc7231DateTime","LazyJsonString","NumericValue","splitHeader","fromBase64","toUtf8","SerdeContext","determineTimestampFormat","FromStringShapeDeserializer","settings","constructor","read","_schema","data","ns","of","isListSchema","map","item","getValueSchema","isBlobSchema","serdeContext","base64Decoder","isTimestampSchema","format","console","warn","Date","isStringSchema","mediaType","getMergedTraits","intermediateValue","httpHeader","base64ToUtf8","isJson","endsWith","from","isNumericSchema","Number","isBigIntegerSchema","BigInt","isBigDecimalSchema","isBooleanSchema","String","toLowerCase","base64String","utf8Encoder"],"sources":["D:/ITechArt/react-lab-2025/application/node_modules/@aws-sdk/middleware-flexible-checksums/node_modules/@smithy/core/dist-es/submodules/protocols/serde/FromStringShapeDeserializer.js"],"sourcesContent":["import { NormalizedSchema } from \"@smithy/core/schema\";\nimport { _parseEpochTimestamp, _parseRfc3339DateTimeWithOffset, _parseRfc7231DateTime, LazyJsonString, NumericValue, splitHeader, } from \"@smithy/core/serde\";\nimport { fromBase64 } from \"@smithy/util-base64\";\nimport { toUtf8 } from \"@smithy/util-utf8\";\nimport { SerdeContext } from \"../SerdeContext\";\nimport { determineTimestampFormat } from \"./determineTimestampFormat\";\nexport class FromStringShapeDeserializer extends SerdeContext {\n    settings;\n    constructor(settings) {\n        super();\n        this.settings = settings;\n    }\n    read(_schema, data) {\n        const ns = NormalizedSchema.of(_schema);\n        if (ns.isListSchema()) {\n            return splitHeader(data).map((item) => this.read(ns.getValueSchema(), item));\n        }\n        if (ns.isBlobSchema()) {\n            return (this.serdeContext?.base64Decoder ?? fromBase64)(data);\n        }\n        if (ns.isTimestampSchema()) {\n            const format = determineTimestampFormat(ns, this.settings);\n            switch (format) {\n                case 5:\n                    return _parseRfc3339DateTimeWithOffset(data);\n                case 6:\n                    return _parseRfc7231DateTime(data);\n                case 7:\n                    return _parseEpochTimestamp(data);\n                default:\n                    console.warn(\"Missing timestamp format, parsing value with Date constructor:\", data);\n                    return new Date(data);\n            }\n        }\n        if (ns.isStringSchema()) {\n            const mediaType = ns.getMergedTraits().mediaType;\n            let intermediateValue = data;\n            if (mediaType) {\n                if (ns.getMergedTraits().httpHeader) {\n                    intermediateValue = this.base64ToUtf8(intermediateValue);\n                }\n                const isJson = mediaType === \"application/json\" || mediaType.endsWith(\"+json\");\n                if (isJson) {\n                    intermediateValue = LazyJsonString.from(intermediateValue);\n                }\n                return intermediateValue;\n            }\n        }\n        if (ns.isNumericSchema()) {\n            return Number(data);\n        }\n        if (ns.isBigIntegerSchema()) {\n            return BigInt(data);\n        }\n        if (ns.isBigDecimalSchema()) {\n            return new NumericValue(data, \"bigDecimal\");\n        }\n        if (ns.isBooleanSchema()) {\n            return String(data).toLowerCase() === \"true\";\n        }\n        return data;\n    }\n    base64ToUtf8(base64String) {\n        return (this.serdeContext?.utf8Encoder ?? toUtf8)((this.serdeContext?.base64Decoder ?? fromBase64)(base64String));\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}